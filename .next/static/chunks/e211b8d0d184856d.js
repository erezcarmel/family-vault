(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51711,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(20755),l=e.i(49721),i=e.i(68757),r=e.i(98484);function n(){let[e,n]=(0,t.useState)([]),[c,o]=(0,t.useState)(null),[d,m]=(0,t.useState)(!0),[x,h]=(0,t.useState)(!1),[u,p]=(0,t.useState)(null),[f,j]=(0,t.useState)({name:"",email:"",password:"",relationship_description:""}),[y,g]=(0,t.useState)(!1),[b,N]=(0,t.useState)(!1),v=(0,a.createClient)();(0,t.useEffect)(()=>{w()},[]);let w=async()=>{try{let e=await (0,r.getFamilyId)(v);if(e){o(e);let s=await (0,r.isAdmin)(v,e);N(s),s&&await E(e)}}catch(e){console.error("Error loading data:",e)}finally{m(!1)}},E=async e=>{let{data:s,error:t}=await v.from("executors").select("*").eq("family_id",e).order("created_at",{ascending:!1});t?console.error("Error loading executors:",t):n(s||[])},A=async e=>{if(e.preventDefault(),c)try{g(!0);let e=await fetch("/api/executors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({executor_id:u?.id,name:f.name,email:f.email,password:f.password,relationship_description:f.relationship_description})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to save executor");await E(c),j({name:"",email:"",password:"",relationship_description:""}),h(!1),p(null)}catch(e){console.error("Error saving executor:",e),alert(e instanceof Error?e.message:"Failed to save executor. Please try again.")}finally{g(!1)}},F=async e=>{if(confirm("Are you sure you want to remove this executor? They will lose access to the system."))try{let{error:s}=await v.from("executors").delete().eq("id",e);if(s)throw s;c&&await E(c)}catch(e){console.error("Error deleting executor:",e),alert("Failed to delete executor. Please try again.")}};return d?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):b?(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-teal-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faUserTie,className:"text-white text-xl"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Executors"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage people with read-only access to your family vault"})]})]}),(0,s.jsxs)("button",{onClick:()=>h(!x),className:"btn-primary",children:[(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faPlus,className:"mr-2"}),"Add Executor"]})]}),(0,s.jsx)("div",{className:"card mb-6 bg-blue-50 border-blue-200",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faInfoCircle,className:"text-blue-600 text-xl mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-blue-900 mb-1",children:"About Executors"}),(0,s.jsx)("p",{className:"text-sm text-blue-800",children:"Executors are trusted individuals who have read-only access to your family vault. They cannot modify any information or change their password. Common examples include estate executors, trusted advisors, or family friends who may need access to your information."})]})]})}),x&&(0,s.jsxs)("div",{className:"card mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:u?"Edit Executor":"Add Executor"}),(0,s.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faUser,className:"text-gray-400"})}),(0,s.jsx)("input",{type:"text",value:f.name,onChange:e=>j({...f,name:e.target.value}),className:"input-field pl-10",placeholder:"Executor name",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faEnvelope,className:"text-gray-400"})}),(0,s.jsx)("input",{type:"email",value:f.email,onChange:e=>j({...f,email:e.target.value}),className:"input-field pl-10",placeholder:"executor@example.com",required:!0,disabled:null!=u})]}),u&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed after creation"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",u?"(leave blank to keep current)":(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faKey,className:"text-gray-400"})}),(0,s.jsx)("input",{type:"password",value:f.password,onChange:e=>j({...f,password:e.target.value}),className:"input-field pl-10",placeholder:"Enter password",required:!u,minLength:8})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:u?"Only you (admin) can set/change the password":"Minimum 8 characters. Only you can set this password."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Relationship Description ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:f.relationship_description,onChange:e=>j({...f,relationship_description:e.target.value}),className:"input-field",placeholder:"e.g., Uncle, Dad's friend, Estate lawyer",required:!0}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Describe who this person is"})]})]}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{h(!1),p(null),j({name:"",email:"",password:"",relationship_description:""})},className:"btn-secondary",disabled:y,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn-primary",disabled:y,children:y?"Saving...":u?"Update Executor":"Add Executor"})]})]})]}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-12 card",children:[(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faUserTie,className:"text-6xl text-gray-300 mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Executors Yet"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Add trusted individuals who need read-only access to your family vault"}),(0,s.jsxs)("button",{onClick:()=>h(!0),className:"btn-primary",children:[(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faPlus,className:"mr-2"}),"Add Your First Executor"]})]}):(0,s.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsx)("div",{className:"card hover:shadow-lg transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden mb-3 border-2 border-teal-200",children:(0,s.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-teal-400 to-blue-500 flex items-center justify-center",children:(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faUserTie,className:"text-white text-2xl"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.relationship_description}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-2 flex items-center",children:[(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faEnvelope,className:"mr-1"}),e.email]}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Read-Only Access"})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("button",{onClick:()=>{p(e),j({name:e.name,email:e.email,password:"",relationship_description:e.relationship_description}),h(!0)},className:"text-indigo-600 hover:text-indigo-700 p-2 rounded-lg hover:bg-indigo-50 transition-colors",title:"Edit executor",children:(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faEdit})}),(0,s.jsx)("button",{onClick:()=>F(e.id),className:"text-red-600 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Delete executor",children:(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faTrash})})]})]})},e.id))})]}):(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)("div",{className:"card text-center py-12",children:[(0,s.jsx)(l.FontAwesomeIcon,{icon:i.faUserTie,className:"text-6xl text-gray-300 mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-gray-600",children:"You need admin permissions to manage executors."})]})})}e.s(["default",()=>n,"dynamic",0,"force-dynamic"])}]);