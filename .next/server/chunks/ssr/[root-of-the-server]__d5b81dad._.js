module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},68979,a=>{"use strict";async function b(a){let{data:{user:b}}=await a.auth.getUser();if(!b)return null;let{data:c,error:d}=await a.from("family_users").select("family_id").eq("user_id",b.id).maybeSingle();if(c&&!d)return c.family_id;let{data:e,error:f}=await a.from("families").select("id").eq("user_id",b.id).maybeSingle();return e&&!f?e.id:null}async function c(a,b){let{data:{user:c}}=await a.auth.getUser();if(!c)return null;let{data:d,error:e}=await a.from("family_users").select("role").eq("family_id",b).eq("user_id",c.id).maybeSingle();return e?(console.error("Error getting user role:",e),null):d?.role||null}async function d(a,b){return"admin"===await c(a,b)}async function e(a,b){let d=await c(a,b);return"admin"===d||"editor"===d}a.s(["getFamilyId",()=>b,"getUserRole",()=>c,"isAdmin",()=>d,"isEditorOrAdmin",()=>e])},45192,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(3650),g=a.i(21929),h=a.i(69240),i=a.i(68979);let j=[{href:"/dashboard",icon:g.faHome,label:"Dashboard",category:null}],k=[{href:"/dashboard/money-accounts",icon:g.faDollarSign,label:"Money Accounts",category:"money_accounts"},{href:"/dashboard/insurance",icon:g.faShieldAlt,label:"Insurance",category:"insurance"},{href:"/dashboard/liabilities",icon:g.faHandHoldingDollar,label:"Liabilities",category:"liabilities"},{href:"/dashboard/healthcare",icon:g.faHeartPulse,label:"Healthcare",category:"healthcare_records"},{href:"/dashboard/digital-assets",icon:g.faLaptop,label:"Digital Assets",category:"digital_assets"},{href:"/dashboard/documents",icon:g.faFileAlt,label:"Documents",category:"documents"}],l=[{href:"/dashboard/family",icon:g.faUsers,label:"Family Tree",category:"family_members"},{href:"/dashboard/executors",icon:g.faUserTie,label:"Executors",category:null}];function m(){let[a,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)({}),[v,w]=(0,c.useState)(!1),x=(0,e.usePathname)(),y=(0,e.useRouter)(),z=(0,h.createClient)();(0,c.useEffect)(()=>{(async()=>{try{let a=await (0,i.getFamilyId)(z);if(a){let b=await (0,i.getUserRole)(z,a);console.log("Sidebar - Family ID:",a,"Role:",b),s(b)}else console.log("Sidebar - No family ID found")}catch(a){console.error("Sidebar - Error loading user role:",a)}})()},[z]),(0,c.useEffect)(()=>{let a=async()=>{try{let a=await (0,i.getFamilyId)(z);if(!a)return;let b={},{data:c,error:d}=await z.from("assets").select("category").eq("family_id",a);!d&&c&&c.forEach(a=>{b[a.category]=(b[a.category]||0)+1});let[{count:e,error:f},{count:g,error:h},{count:j,error:k}]=await Promise.all([z.from("healthcare_records").select("id",{count:"exact",head:!0}).eq("family_id",a),z.from("documents").select("id",{count:"exact",head:!0}).eq("family_id",a),z.from("family_members").select("id",{count:"exact",head:!0}).eq("family_id",a)]);f||null===e?f&&console.error("Sidebar - Error loading healthcare records count:",f):b.healthcare_records=e,h||null===g?h&&console.error("Sidebar - Error loading documents count:",h):b.documents=g,k||null===j?k&&console.error("Sidebar - Error loading family members count:",k):b.family_members=j,u(b),w(!0)}catch(a){console.error("Sidebar - Error loading asset counts:",a)}};([...j,...k,...l].some(a=>a.category&&x?.startsWith(a.href))||!v)&&a()},[z,x]);let A=async()=>{await z.auth.signOut(),y.push("/auth/signin")};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>m(!a),className:"lg:hidden fixed top-4 left-4 z-50 bg-indigo-600 text-white p-3 rounded-lg shadow-lg",children:(0,b.jsx)(f.FontAwesomeIcon,{icon:a?g.faTimes:g.faBars})}),a&&(0,b.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>m(!1)}),(0,b.jsx)("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-40
          bg-white border-r border-gray-200
          transform transition-all duration-300 ease-in-out
          ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          ${n?"w-20":"w-64"}
        `,children:(0,b.jsxs)("div",{className:"flex flex-col h-full relative",children:[(0,b.jsx)("div",{className:`border-b border-gray-200 transition-all duration-300 ${n?"p-4":"p-6"}`,children:(0,b.jsxs)("div",{className:`flex items-center ${n?"justify-center":"space-x-3"}`,children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(f.FontAwesomeIcon,{icon:g.faVault,className:"text-white text-lg"})}),!n&&(0,b.jsxs)("div",{className:"transition-opacity duration-300",children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Family Vault"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Family Asset Management"})]})]})}),(0,b.jsx)("button",{onClick:()=>o(!n),className:"hidden lg:flex absolute -right-3 top-6 bg-white border border-gray-200 rounded-full p-1 shadow-md hover:bg-indigo-50 transition-colors z-10 cursor-pointer","aria-label":n?"Expand sidebar":"Collapse sidebar",children:(0,b.jsx)(f.FontAwesomeIcon,{icon:n?g.faChevronRight:g.faChevronLeft,className:"text-xs max-w-3 max-h-3"})}),(0,b.jsx)("nav",{className:"flex-1 overflow-y-auto p-4",children:(0,b.jsxs)("ul",{className:"space-y-2",children:[j.map(a=>{let c="/dashboard"===a.href?x===a.href:x===a.href||x?.startsWith(a.href+"/"),e=a.category?t[a.category]||0:null;return(0,b.jsx)("li",{children:(0,b.jsxs)(d.default,{href:a.href,onClick:()=>m(!1),className:`
                        flex items-center ${n?"justify-center":"justify-between"} 
                        ${n?"px-3":"px-4"} py-3 rounded-lg relative
                        transition-colors duration-200
                        ${c?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-700 hover:bg-gray-50"}
                      `,children:[(0,b.jsxs)("div",{className:`flex items-center ${n?"":"space-x-3"}`,children:[(0,b.jsx)(f.FontAwesomeIcon,{icon:a.icon,className:"w-5 flex-shrink-0"}),!n&&(0,b.jsx)("span",{children:a.label})]}),!n&&null!==e&&(0,b.jsx)("span",{className:`
                          text-xs font-semibold px-2 py-1 rounded-full
                          ${c?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"}
                        `,children:e})]})},a.href)}),!n&&(0,b.jsxs)("li",{children:[(0,b.jsx)("button",{onClick:()=>q(!p),"aria-expanded":p,"aria-controls":"family-assets-list",className:"flex items-center justify-between px-4 py-3 rounded-lg w-full text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(f.FontAwesomeIcon,{icon:g.faChevronRight,className:`w-4 text-gray-500 transition-transform duration-300 ease-in-out ${p?"rotate-90":"rotate-0"}`,"aria-hidden":"true"}),(0,b.jsx)("span",{className:"font-medium",children:"Family Assets"})]})}),(0,b.jsx)("div",{id:"family-assets-list",className:`
                      overflow-hidden transition-all duration-300 ease-in-out
                      ${p?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}
                    `,children:(0,b.jsx)("ul",{className:"mt-1 space-y-1",children:k.map(a=>{let c=x===a.href||x?.startsWith(a.href+"/"),e=a.category?t[a.category]||0:null;return(0,b.jsx)("li",{children:(0,b.jsxs)(d.default,{href:a.href,onClick:()=>m(!1),className:`
                                flex items-center justify-between px-4 py-3 rounded-lg ml-6
                                transition-colors duration-200
                                ${c?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-700 hover:bg-gray-50"}
                              `,children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(f.FontAwesomeIcon,{icon:a.icon,className:"w-5"}),(0,b.jsx)("span",{children:a.label})]}),null!==e&&(0,b.jsx)("span",{className:`
                                  text-xs font-semibold px-2 py-1 rounded-full
                                  ${c?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"}
                                `,children:e})]})},a.href)})})})]}),n&&(0,b.jsx)(b.Fragment,{children:k.map(a=>{let c=x===a.href||x?.startsWith(a.href+"/");return(0,b.jsx)("li",{children:(0,b.jsx)(d.default,{href:a.href,onClick:()=>m(!1),className:`
                            flex items-center justify-center px-3 py-3 rounded-lg relative
                            transition-colors duration-200
                            ${c?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-700 hover:bg-gray-50"}
                          `,children:(0,b.jsx)(f.FontAwesomeIcon,{icon:a.icon,className:"w-5"})})},a.href)})}),l.map(a=>{let c=x===a.href||x?.startsWith(a.href+"/"),e=a.category?t[a.category]||0:null;return(0,b.jsx)("li",{children:(0,b.jsxs)(d.default,{href:a.href,onClick:()=>m(!1),className:`
                        flex items-center ${n?"justify-center":"justify-between"} 
                        ${n?"px-3":"px-4"} py-3 rounded-lg relative
                        transition-colors duration-200
                        ${c?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-700 hover:bg-gray-50"}
                      `,children:[(0,b.jsxs)("div",{className:`flex items-center ${n?"":"space-x-3"}`,children:[(0,b.jsx)(f.FontAwesomeIcon,{icon:a.icon,className:"w-5 flex-shrink-0"}),!n&&(0,b.jsx)("span",{children:a.label})]}),!n&&null!==e&&(0,b.jsx)("span",{className:`
                          text-xs font-semibold px-2 py-1 rounded-full
                          ${c?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"}
                        `,children:e})]})},a.href)})]})}),(0,b.jsxs)("div",{className:`border-t border-gray-200 space-y-2 ${n?"p-2":"p-4"}`,children:[(0,b.jsxs)(d.default,{href:"/dashboard/settings",onClick:()=>m(!1),className:`
                flex items-center ${n?"justify-center":"space-x-3"} 
                ${n?"px-3":"px-4"} py-3 rounded-lg w-full relative
                transition-colors duration-200
                ${"/dashboard/settings"===x?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-700 hover:bg-gray-50"}
              `,children:[(0,b.jsx)(f.FontAwesomeIcon,{icon:g.faCog,className:"w-5 flex-shrink-0"}),!n&&(0,b.jsx)("span",{children:"Settings"})]}),(0,b.jsxs)("button",{onClick:A,className:`
                flex items-center ${n?"justify-center":"space-x-3"} 
                ${n?"px-3":"px-4"} py-3 rounded-lg w-full relative
                text-red-600 hover:bg-red-50 transition-colors duration-200
              `,children:[(0,b.jsx)(f.FontAwesomeIcon,{icon:g.faSignOutAlt,className:"w-5 flex-shrink-0"}),!n&&(0,b.jsx)("span",{children:"Sign Out"})]})]})]})})]})}a.s(["default",()=>m])},59789,a=>{a.v(a=>Promise.resolve().then(()=>a(23952)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d5b81dad._.js.map