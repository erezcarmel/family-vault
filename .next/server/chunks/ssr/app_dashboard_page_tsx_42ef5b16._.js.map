{"version":3,"sources":["../../../../app/dashboard/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { createClient } from '@/lib/supabase/client'\nimport Link from 'next/link'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faDollarSign,\n  faShieldAlt,\n  faHandHoldingDollar,\n  faHeartPulse,\n  faLaptop,\n  faFileAlt,\n  faArrowRight,\n  faEdit,\n  faCheck,\n  faTimes,\n} from '@fortawesome/free-solid-svg-icons'\nimport type { Family } from '@/types'\nimport type { IconDefinition } from '@fortawesome/fontawesome-svg-core'\n\nexport const dynamic = 'force-dynamic'\n\ninterface AssetSection {\n  id: string\n  title: string\n  icon: IconDefinition\n  description: string\n  color: string\n  disabled?: boolean\n}\n\nconst assetSections: AssetSection[] = [\n  {\n    id: 'money-accounts',\n    title: 'Money Accounts',\n    icon: faDollarSign,\n    description: 'Manage your checking, savings, and investment accounts',\n    color: 'bg-green-500',\n  },\n  {\n    id: 'insurance',\n    title: 'Insurance',\n    icon: faShieldAlt,\n    description: 'Track your life, home, and health insurance policies',\n    color: 'bg-blue-500',\n  },\n  {\n    id: 'documents',\n    title: 'Documents',\n    icon: faFileAlt,\n    description: 'Upload and manage important documents',\n    color: 'bg-purple-500',\n  },\n  {\n    id: 'liabilities',\n    title: 'Liabilities',\n    icon: faHandHoldingDollar,\n    description: 'Coming soon',\n    color: 'bg-red-500',\n  },\n  {\n    id: 'healthcare',\n    title: 'Healthcare',\n    icon: faHeartPulse,\n    description: 'Manage healthcare records, medications, and providers for your family',\n    color: 'bg-pink-500',\n  },\n  {\n    id: 'digital-assets',\n    title: 'Digital Assets',\n    icon: faLaptop,\n    description: 'Manage your digital assets and email accounts',\n    color: 'bg-purple-500',\n  },\n]\n\nexport default function Dashboard() {\n  const [family, setFamily] = useState<Family | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [editingFamilyName, setEditingFamilyName] = useState(false)\n  const [newFamilyName, setNewFamilyName] = useState('')\n  const [savingFamilyName, setSavingFamilyName] = useState(false)\n  const supabase = createClient()\n\n  useEffect(() => {\n    loadProfile()\n  }, [])\n\n  const loadProfile = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser()\n      \n      if (user) {\n        const { data } = await supabase\n          .from('families')\n          .select('*')\n          .eq('user_id', user.id)\n          .single()\n        \n        setFamily(data)\n      }\n    } catch (error) {\n      console.error('Error loading family:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleEditFamilyName = () => {\n    setNewFamilyName(family?.family_name || '')\n    setEditingFamilyName(true)\n  }\n\n  const handleSaveFamilyName = async () => {\n    if (!family || !newFamilyName.trim()) return\n\n    setSavingFamilyName(true)\n\n    try {\n      const { error } = await supabase\n        .from('families')\n        .update({ family_name: newFamilyName.trim() })\n        .eq('id', family.id)\n\n      if (error) throw error\n\n      setFamily({ ...family, family_name: newFamilyName.trim() })\n      setEditingFamilyName(false)\n    } catch (error) {\n      console.error('Error updating family name:', error)\n      alert('Failed to update family name. Please try again.')\n    } finally {\n      setSavingFamilyName(false)\n    }\n  }\n\n  const handleCancelEdit = () => {\n    setEditingFamilyName(false)\n    setNewFamilyName('')\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center gap-3 mb-2\">\n          {editingFamilyName ? (\n            <div className=\"flex items-center gap-2 flex-1\">\n              <span className=\"text-3xl font-bold text-gray-900\">The</span>\n              <input\n                type=\"text\"\n                value={newFamilyName}\n                onChange={(e) => setNewFamilyName(e.target.value)}\n                className=\"input-field text-3xl font-bold py-1 px-3 max-w-md\"\n                placeholder=\"Family Name\"\n                autoFocus\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') handleSaveFamilyName()\n                  if (e.key === 'Escape') handleCancelEdit()\n                }}\n              />\n              <span className=\"text-3xl font-bold text-gray-900\">Family</span>\n              <button\n                onClick={handleSaveFamilyName}\n                disabled={savingFamilyName || !newFamilyName.trim()}\n                className=\"text-green-600 hover:text-green-700 p-2 rounded-lg hover:bg-green-50 transition-colors disabled:opacity-50\"\n                title=\"Save\"\n              >\n                <FontAwesomeIcon icon={faCheck} className=\"text-xl\" />\n              </button>\n              <button\n                onClick={handleCancelEdit}\n                disabled={savingFamilyName}\n                className=\"text-red-600 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors\"\n                title=\"Cancel\"\n              >\n                <FontAwesomeIcon icon={faTimes} className=\"text-xl\" />\n              </button>\n            </div>\n          ) : (\n            <>\n              <h1 className=\"text-3xl font-bold text-gray-900\">\n                {family?.family_name ? `The ${family.family_name} Family` : `Welcome back, ${family?.main_user || 'User'}!`}\n              </h1>\n              <button\n                onClick={handleEditFamilyName}\n                className=\"text-indigo-600 hover:text-indigo-700 p-2 rounded-lg hover:bg-indigo-50 transition-colors\"\n                title={family?.family_name ? 'Edit family name' : 'Add family name'}\n              >\n                <FontAwesomeIcon icon={faEdit} className=\"text-lg\" />\n              </button>\n            </>\n          )}\n        </div>\n        {!editingFamilyName && (\n          <p className=\"text-gray-600 mt-2\">\n            Manage your family's assets and important documents in one secure place.\n          </p>\n        )}\n      </div>\n\n      {/* Asset Sections Grid */}\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {assetSections.map((section) => (\n          <Link\n            key={section.id}\n            href={section.disabled ? '#' : `/dashboard/${section.id}`}\n            className={`\n              card hover:shadow-lg transition-all duration-200 relative\n              ${section.disabled ? 'opacity-50 cursor-not-allowed' : 'hover:-translate-y-1 cursor-pointer'}\n            `}\n            onClick={(e) => section.disabled && e.preventDefault()}\n          >\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className={`w-12 h-12 ${section.color} rounded-lg flex items-center justify-center`}>\n                <FontAwesomeIcon icon={section.icon} className=\"text-white text-xl\" />\n              </div>\n              {!section.disabled && (\n                <FontAwesomeIcon icon={faArrowRight} className=\"text-gray-400\" />\n              )}\n            </div>\n            \n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">\n              {section.title}\n            </h2>\n            <p className=\"text-gray-600 text-sm\">\n              {section.description}\n            </p>\n\n            {section.disabled && (\n              <div className=\"absolute top-4 right-4 bg-gray-500 text-white text-xs px-2 py-1 rounded\">\n                Coming Soon\n              </div>\n            )}\n          </Link>\n        ))}\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}