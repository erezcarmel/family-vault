{"version":3,"sources":["../../../../app/dashboard/family/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { createClient } from '@/lib/supabase/client'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUser, faEnvelope, faPlus, faTrash, faUsers, faEdit, faCamera, faTimes, faShieldAlt, faUserEdit, faPaperPlane } from '@fortawesome/free-solid-svg-icons'\nimport type { FamilyMember, FamilyConnection, UserRole } from '@/types'\nimport { getFamilyId, isEditorOrAdmin } from '@/lib/db-helpers-client'\n\nexport const dynamic = 'force-dynamic'\n\nexport default function FamilyTree() {\n  const [members, setMembers] = useState<FamilyMember[]>([])\n  const [connections, setConnections] = useState<FamilyConnection[]>([])\n  const [familyId, setFamilyId] = useState<string | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [isAdding, setIsAdding] = useState(false)\n  const [editingMember, setEditingMember] = useState<FamilyMember | null>(null)\n  const [newMember, setNewMember] = useState({\n    name: '',\n    email: '',\n    relationship: '',\n    role: 'member' as UserRole,\n  })\n  const [memberConnections, setMemberConnections] = useState<Array<{\n    relatedMemberId: string\n    relationshipType: string\n  }>>([])\n  const [uploadedImageFile, setUploadedImageFile] = useState<File | null>(null)\n  const [imagePreview, setImagePreview] = useState<string | null>(null)\n  const [uploadingImage, setUploadingImage] = useState(false)\n  const [canEdit, setCanEdit] = useState(false)\n  const [invitingMember, setInvitingMember] = useState<string | null>(null)\n  const [memberUserStatus, setMemberUserStatus] = useState<Record<string, boolean>>({})\n  const supabase = createClient()\n\n  const relationshipOptions = [\n    'Spouse',\n    'Parent',\n    'Child',\n    'Sibling',\n    'Grandparent',\n    'Grandchild',\n    'Aunt/Uncle',\n    'Cousin',\n    'Other',\n  ]\n\n  const connectionTypes = [\n    'Parent of',\n    'Child of',\n    'Spouse of',\n    'Sibling of',\n    'Grandparent of',\n    'Grandchild of',\n  ]\n\n  const roleOptions: { value: UserRole; label: string; icon: any }[] = [\n    { value: 'admin', label: 'Admin', icon: faShieldAlt },\n    { value: 'editor', label: 'Editor', icon: faUserEdit },\n    { value: 'member', label: 'Member', icon: faUser },\n  ]\n\n  useEffect(() => {\n    loadData()\n  }, [])\n\n  const loadData = async () => {\n    try {\n      const fid = await getFamilyId(supabase)\n      if (fid) {\n        setFamilyId(fid)\n        const canEditValue = await isEditorOrAdmin(supabase, fid)\n        setCanEdit(canEditValue)\n        await loadMembers(fid)\n        await loadConnections(fid)\n      }\n    } catch (error) {\n      console.error('Error loading data:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const checkMemberUserStatus = async (fid: string, membersList: FamilyMember[] = members) => {\n    const { data: familyUsers } = await supabase\n      .from('family_users')\n      .select('user_id')\n      .eq('family_id', fid)\n\n    if (!familyUsers) return\n\n    const userIds = new Set(familyUsers.map(fu => fu.user_id))\n\n    const statusMap: Record<string, boolean> = {}\n    for (const member of membersList) {\n      if (member.email) {\n        try {\n          const response = await fetch('/api/get-user-by-email', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ email: member.email }),\n          })\n          const result = await response.json()\n          if (result.userId && userIds.has(result.userId)) {\n            statusMap[member.id] = true\n          } else {\n            statusMap[member.id] = false\n          }\n        } catch {\n          statusMap[member.id] = false\n        }\n      }\n    }\n    setMemberUserStatus(statusMap)\n  }\n\n  const handleInviteMember = async (member: FamilyMember) => {\n    if (!familyId || !member.email) return\n\n    setInvitingMember(member.id)\n    try {\n      const response = await fetch('/api/invitations', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          email: member.email,\n          role: newMember.role || 'member',\n          familyId: familyId,\n        }),\n      })\n\n      const result = await response.json()\n\n      if (!response.ok) {\n        throw new Error(result.message || result.error || 'Failed to create invitation')\n      }\n\n      alert(`Invitation sent to ${member.email}! Share this link: ${window.location.origin}/auth/signup?token=${result.data.token}`)\n      await checkMemberUserStatus(familyId)\n    } catch (err: any) {\n      console.error('Error inviting member:', err)\n      alert(err.message || 'Failed to send invitation')\n    } finally {\n      setInvitingMember(null)\n    }\n  }\n\n  const loadMembers = async (familyId: string) => {\n    const { data, error } = await supabase\n      .from('family_members')\n      .select('*')\n      .eq('family_id', familyId)\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      console.error('Error loading family members:', error)\n    } else {\n      setMembers(data || [])\n    }\n  }\n\n  const loadConnections = async (familyId: string) => {\n    const { data, error } = await supabase\n      .from('family_connections')\n      .select('*')\n      .eq('family_id', familyId)\n\n    if (error) {\n      console.error('Error loading family connections:', error)\n    } else {\n      setConnections(data || [])\n    }\n  }\n\n  const uploadImage = async (file: File, memberId: string): Promise<string | null> => {\n    try {\n      setUploadingImage(true)\n      \n      // Create unique file name\n      const fileExt = file.name.split('.').pop()\n      const fileName = `${familyId}/${memberId}-${Date.now()}.${fileExt}`\n      \n      // Upload to Supabase Storage\n      const { data, error } = await supabase.storage\n        .from('family-member-photos')\n        .upload(fileName, file, {\n          cacheControl: '3600',\n          upsert: false\n        })\n\n      if (error) throw error\n\n      // Get public URL\n      const { data: urlData } = supabase.storage\n        .from('family-member-photos')\n        .getPublicUrl(fileName)\n\n      return urlData.publicUrl\n    } catch (error) {\n      console.error('Error uploading image:', error)\n      alert('Failed to upload image. Please try again.')\n      return null\n    } finally {\n      setUploadingImage(false)\n    }\n  }\n\n  const deleteOldImage = async (imageUrl: string) => {\n    try {\n      // Extract file path from URL\n      const urlParts = imageUrl.split('/family-member-photos/')\n      if (urlParts.length > 1) {\n        const filePath = urlParts[1]\n        await supabase.storage\n          .from('family-member-photos')\n          .remove([filePath])\n      }\n    } catch (error) {\n      console.error('Error deleting old image:', error)\n    }\n  }\n\n  const handleAddMember = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!familyId) return\n\n    try {\n      let memberId: string\n      let imageUrl: string | null = null\n\n      // Upload image if a new one was selected\n      if (uploadedImageFile) {\n        // If editing and there's an old image, delete it first\n        if (editingMember?.image_url) {\n          await deleteOldImage(editingMember.image_url)\n        }\n      }\n\n      if (editingMember) {\n        memberId = editingMember.id\n\n        // Upload new image if provided\n        if (uploadedImageFile) {\n          imageUrl = await uploadImage(uploadedImageFile, memberId)\n        }\n\n        // Update existing member\n        const updateData: any = {\n          name: newMember.name,\n          email: newMember.email || null,\n          relationship: newMember.relationship,\n        }\n\n        if (imageUrl) {\n          updateData.image_url = imageUrl\n        }\n\n        const { error } = await supabase\n          .from('family_members')\n          .update(updateData)\n          .eq('id', editingMember.id)\n\n        if (error) throw error\n\n        // Update family_users entry if email exists\n        if (newMember.email) {\n          const response = await fetch('/api/get-user-by-email', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ email: newMember.email }),\n          })\n          const result = await response.json()\n          \n          if (result.userId) {\n            const { error: updateUserError } = await supabase\n              .from('family_users')\n              .update({ role: newMember.role })\n              .eq('family_id', familyId)\n              .eq('user_id', result.userId)\n\n            if (updateUserError && updateUserError.code !== 'PGRST116') {\n              console.error('Error updating family_users:', updateUserError)\n            }\n          }\n        }\n\n        // Delete existing connections for this member\n        await supabase\n          .from('family_connections')\n          .delete()\n          .eq('member_id', memberId)\n      } else {\n        // Insert new member first to get ID\n        const { data, error } = await supabase\n          .from('family_members')\n          .insert({\n            family_id: familyId,\n            name: newMember.name,\n            email: newMember.email || null,\n            relationship: newMember.relationship,\n          })\n          .select()\n          .single()\n\n        if (error) throw error\n        memberId = data.id\n\n        // Upload image if provided\n        if (uploadedImageFile) {\n          imageUrl = await uploadImage(uploadedImageFile, memberId)\n          \n          // Update member with image URL\n          if (imageUrl) {\n            await supabase\n              .from('family_members')\n              .update({ image_url: imageUrl })\n              .eq('id', memberId)\n          }\n        }\n\n        // Create family_users entry if email is provided\n        if (newMember.email) {\n          try {\n            const response = await fetch('/api/add-family-user', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({\n                email: newMember.email,\n                role: newMember.role,\n                familyId: familyId,\n              }),\n            })\n\n            const result = await response.json()\n            if (!response.ok && result.error !== 'User already exists') {\n              console.warn('Could not add user to family_users:', result.message || result.error)\n            }\n          } catch (err) {\n            console.warn('Error adding user to family_users:', err)\n          }\n        }\n      }\n\n      // Insert connections\n      if (memberConnections.length > 0) {\n        const connectionsToInsert = memberConnections.map(conn => ({\n          family_id: familyId,\n          member_id: memberId,\n          related_member_id: conn.relatedMemberId,\n          relationship_type: conn.relationshipType,\n        }))\n\n        const { error: connError } = await supabase\n          .from('family_connections')\n          .insert(connectionsToInsert)\n\n        if (connError) throw connError\n      }\n\n      await loadMembers(familyId)\n      await loadConnections(familyId)\n      setNewMember({ name: '', email: '', relationship: '', role: 'member' })\n      setMemberConnections([])\n      setUploadedImageFile(null)\n      setImagePreview(null)\n      setIsAdding(false)\n      setEditingMember(null)\n    } catch (error) {\n      console.error('Error saving family member:', error)\n    }\n  }\n\n  const handleEditMember = async (member: FamilyMember) => {\n    setEditingMember(member)\n    \n    let memberRole: UserRole = 'member'\n    if (member.email && familyId) {\n      try {\n        const response = await fetch('/api/get-user-by-email', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ email: member.email }),\n        })\n        const result = await response.json()\n        if (result.userId) {\n          const { data: familyUser } = await supabase\n            .from('family_users')\n            .select('role')\n            .eq('family_id', familyId)\n            .eq('user_id', result.userId)\n            .maybeSingle()\n          if (familyUser) {\n            memberRole = familyUser.role\n          }\n        }\n      } catch (err) {\n        console.warn('Could not fetch user role:', err)\n      }\n    }\n    \n    setNewMember({\n      name: member.name,\n      email: member.email || '',\n      relationship: member.relationship,\n      role: memberRole,\n    })\n\n    // Set existing image preview\n    if (member.image_url) {\n      setImagePreview(member.image_url)\n    }\n\n    // Load existing connections for this member\n    const existingConnections = connections\n      .filter(conn => conn.member_id === member.id)\n      .map(conn => ({\n        relatedMemberId: conn.related_member_id,\n        relationshipType: conn.relationship_type,\n      }))\n    \n    setMemberConnections(existingConnections)\n    setIsAdding(true)\n  }\n\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    // Check file type\n    if (!file.type.startsWith('image/')) {\n      alert('Please select an image file')\n      return\n    }\n\n    // Check file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      alert('Image size should be less than 5MB')\n      return\n    }\n\n    setUploadedImageFile(file)\n\n    // Create preview\n    const reader = new FileReader()\n    reader.onload = (e) => {\n      setImagePreview(e.target?.result as string)\n    }\n    reader.readAsDataURL(file)\n  }\n\n  const removeImage = () => {\n    setUploadedImageFile(null)\n    setImagePreview(null)\n  }\n\n  const addConnection = () => {\n    setMemberConnections([...memberConnections, { relatedMemberId: '', relationshipType: '' }])\n  }\n\n  const updateConnection = (index: number, field: 'relatedMemberId' | 'relationshipType', value: string) => {\n    const updated = [...memberConnections]\n    updated[index][field] = value\n    setMemberConnections(updated)\n  }\n\n  const removeConnection = (index: number) => {\n    setMemberConnections(memberConnections.filter((_, i) => i !== index))\n  }\n\n  const getMemberConnections = (memberId: string): FamilyConnection[] => {\n    return connections.filter(conn => conn.member_id === memberId)\n  }\n\n  const getMemberName = (memberId: string): string => {\n    return members.find(m => m.id === memberId)?.name || 'Unknown'\n  }\n\n  const handleDeleteMember = async (id: string) => {\n    if (!confirm('Are you sure you want to remove this family member?')) return\n\n    try {\n      const { error } = await supabase\n        .from('family_members')\n        .delete()\n        .eq('id', id)\n\n      if (error) throw error\n      if (familyId) await loadMembers(familyId)\n    } catch (error) {\n      console.error('Error deleting family member:', error)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-8\">\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center\">\n            <FontAwesomeIcon icon={faUsers} className=\"text-white text-xl\" />\n          </div>\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Family Tree</h1>\n            <p className=\"text-gray-600\">Manage your family members</p>\n          </div>\n        </div>\n\n        {canEdit && (\n          <button\n            onClick={() => setIsAdding(!isAdding)}\n            className=\"btn-primary\"\n          >\n            <FontAwesomeIcon icon={faPlus} className=\"mr-2\" />\n            Add Member\n          </button>\n        )}\n      </div>\n\n      {/* Add/Edit Member Form */}\n      {isAdding && canEdit && (\n        <div className=\"card mb-6\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\n            {editingMember ? 'Edit Family Member' : 'Add Family Member'}\n          </h2>\n          <form onSubmit={handleAddMember} className=\"space-y-6\">\n            {/* Image Upload Section */}\n            <div className=\"flex items-center gap-6\">\n              <div className=\"relative\">\n                {imagePreview ? (\n                  <div className=\"relative w-32 h-32 rounded-full overflow-hidden border-4 border-indigo-100\">\n                    <img\n                      src={imagePreview}\n                      alt=\"Member preview\"\n                      className=\"w-full h-full object-cover\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={removeImage}\n                      className=\"absolute top-1 right-1 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-700\"\n                    >\n                      <FontAwesomeIcon icon={faTimes} className=\"text-xs\" />\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"w-32 h-32 rounded-full bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center\">\n                    <FontAwesomeIcon icon={faUser} className=\"text-white text-4xl\" />\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"flex-1\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Member Photo (Optional)\n                </label>\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleImageChange}\n                  className=\"input-field\"\n                />\n                <p className=\"text-xs text-gray-500 mt-2\">\n                  Upload a photo (max 5MB). Supports JPG, PNG, GIF.\n                </p>\n              </div>\n            </div>\n\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Name\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <FontAwesomeIcon icon={faUser} className=\"text-gray-400\" />\n                </div>\n                <input\n                  type=\"text\"\n                  value={newMember.name}\n                  onChange={(e) => setNewMember({ ...newMember, name: e.target.value })}\n                  className=\"input-field pl-10\"\n                  placeholder=\"Family member name\"\n                  required\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Email\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <FontAwesomeIcon icon={faEnvelope} className=\"text-gray-400\" />\n                </div>\n                <input\n                  type=\"email\"\n                  value={newMember.email}\n                  onChange={(e) => setNewMember({ ...newMember, email: e.target.value })}\n                  className=\"input-field pl-10\"\n                  placeholder=\"member@example.com\"\n                />\n              </div>\n              <p className=\"text-xs text-gray-500 mt-1\">\n                Required to add as app user\n              </p>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Relationship\n              </label>\n              <select\n                value={newMember.relationship}\n                onChange={(e) => setNewMember({ ...newMember, relationship: e.target.value })}\n                className=\"input-field\"\n                required\n              >\n                <option value=\"\">Select relationship</option>\n                {relationshipOptions.map((option) => (\n                  <option key={option} value={option}>\n                    {option}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Role\n              </label>\n              <select\n                value={newMember.role}\n                onChange={(e) => setNewMember({ ...newMember, role: e.target.value as UserRole })}\n                className=\"input-field\"\n                disabled={!newMember.email}\n              >\n                {roleOptions.map((option) => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </select>\n              <p className=\"text-xs text-gray-500 mt-1\">\n                {newMember.email ? 'App user permissions' : 'Enter email to set role'}\n              </p>\n            </div>\n\n            <div className=\"md:col-span-4 flex space-x-3\">\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setIsAdding(false)\n                  setEditingMember(null)\n                  setNewMember({ name: '', email: '', relationship: '', role: 'member' })\n                  setMemberConnections([])\n                  setUploadedImageFile(null)\n                  setImagePreview(null)\n                }}\n                className=\"btn-secondary\"\n              >\n                Cancel\n              </button>\n              <button \n                type=\"submit\" \n                className=\"btn-primary\"\n                disabled={uploadingImage}\n              >\n                {uploadingImage ? 'Uploading...' : (editingMember ? 'Update Member' : 'Add Member')}\n              </button>\n            </div>\n            </div>\n\n            {/* Connections Section */}\n            {members.length > 0 && (\n              <div className=\"md:col-span-4 border-t border-gray-200 pt-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-gray-900\">Family Connections (Optional)</h3>\n                    <p className=\"text-sm text-gray-600\">Define how this member is related to other family members</p>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={addConnection}\n                    className=\"btn-secondary text-sm\"\n                  >\n                    <FontAwesomeIcon icon={faPlus} className=\"mr-2\" />\n                    Add Connection\n                  </button>\n                </div>\n\n                {memberConnections.length > 0 && (\n                  <div className=\"space-y-3\">\n                    {memberConnections.map((conn, index) => (\n                      <div key={index} className=\"grid grid-cols-2 gap-3 items-end bg-gray-50 p-3 rounded-lg\">\n                        <div>\n                          <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                            This member is:\n                          </label>\n                          <select\n                            value={conn.relationshipType}\n                            onChange={(e) => updateConnection(index, 'relationshipType', e.target.value)}\n                            className=\"input-field text-sm\"\n                            required\n                          >\n                            <option value=\"\">Select relationship</option>\n                            {connectionTypes.map((type) => (\n                              <option key={type} value={type}>\n                                {type}\n                              </option>\n                            ))}\n                          </select>\n                        </div>\n\n                        <div>\n                          <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                            Related to:\n                          </label>\n                          <div className=\"flex gap-2\">\n                            <select\n                              value={conn.relatedMemberId}\n                              onChange={(e) => updateConnection(index, 'relatedMemberId', e.target.value)}\n                              className=\"input-field text-sm flex-1\"\n                              required\n                            >\n                              <option value=\"\">Select member</option>\n                              {members\n                                .filter(m => !editingMember || m.id !== editingMember.id)\n                                .map((member) => (\n                                  <option key={member.id} value={member.id}>\n                                    {member.name}\n                                  </option>\n                                ))}\n                            </select>\n                            <button\n                              type=\"button\"\n                              onClick={() => removeConnection(index)}\n                              className=\"text-red-600 hover:text-red-700 px-3 py-2 rounded-lg hover:bg-red-50\"\n                            >\n                              <FontAwesomeIcon icon={faTrash} />\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {memberConnections.length === 0 && (\n                  <p className=\"text-sm text-gray-500 text-center py-4\">\n                    No connections added yet. Click \"Add Connection\" to define relationships.\n                  </p>\n                )}\n              </div>\n            )}\n          </form>\n        </div>\n      )}\n\n      {/* Family Members Grid */}\n      {members.length === 0 ? (\n        <div className=\"text-center py-12 card\">\n          <FontAwesomeIcon icon={faUsers} className=\"text-6xl text-gray-300 mb-4\" />\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Family Members Yet</h3>\n          <p className=\"text-gray-600 mb-6\">Start building your family tree</p>\n          {canEdit && (\n            <button\n              onClick={() => setIsAdding(true)}\n              className=\"btn-primary\"\n            >\n              <FontAwesomeIcon icon={faPlus} className=\"mr-2\" />\n              Add Your First Member\n            </button>\n          )}\n        </div>\n      ) : (\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {members.map((member) => (\n            <div key={member.id} className=\"card hover:shadow-lg transition-shadow\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"w-16 h-16 rounded-full overflow-hidden mb-3 border-2 border-indigo-200\">\n                    {member.image_url ? (\n                      <img\n                        src={member.image_url}\n                        alt={member.name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center\">\n                        <FontAwesomeIcon icon={faUser} className=\"text-white text-2xl\" />\n                      </div>\n                    )}\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">{member.name}</h3>\n                  <p className=\"text-sm text-gray-600 mt-1\">{member.relationship}</p>\n                  {member.email && (\n                    <p className=\"text-xs text-gray-500 mt-1\">{member.email}</p>\n                  )}\n\n                  {/* Display connections */}\n                  {getMemberConnections(member.id).length > 0 && (\n                    <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                      <p className=\"text-xs font-semibold text-gray-700 mb-1\">Connections:</p>\n                      <div className=\"space-y-1\">\n                        {getMemberConnections(member.id).map((conn) => (\n                          <p key={conn.id} className=\"text-xs text-gray-600\">\n                            â€¢ {conn.relationship_type} <span className=\"font-medium\">{getMemberName(conn.related_member_id)}</span>\n                          </p>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"flex flex-col gap-2\">\n                  {member.email && !memberUserStatus[member.id] && canEdit && (\n                    <button\n                      onClick={() => handleInviteMember(member)}\n                      disabled={invitingMember === member.id}\n                      className=\"text-green-600 hover:text-green-700 p-2 rounded-lg hover:bg-green-50 transition-colors disabled:opacity-50\"\n                      title=\"Invite as user\"\n                    >\n                      <FontAwesomeIcon icon={faPaperPlane} />\n                    </button>\n                  )}\n                  {canEdit && (\n                    <>\n                      <button\n                        onClick={() => handleEditMember(member)}\n                        className=\"text-indigo-600 hover:text-indigo-700 p-2 rounded-lg hover:bg-indigo-50 transition-colors\"\n                        title=\"Edit member\"\n                      >\n                        <FontAwesomeIcon icon={faEdit} />\n                      </button>\n                      <button\n                        onClick={() => handleDeleteMember(member.id)}\n                        className=\"text-red-600 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors\"\n                        title=\"Delete member\"\n                      >\n                        <FontAwesomeIcon icon={faTrash} />\n                      </button>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}