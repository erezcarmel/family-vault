{"version":3,"sources":["../../../../app/dashboard/documents/page.tsx","../../../../components/UploadDocumentModal.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { createClient } from '@/lib/supabase/client'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faFileAlt, faDownload, faTrash, faSpinner, faEdit } from '@fortawesome/free-solid-svg-icons'\nimport UploadDocumentModal from '@/components/UploadDocumentModal'\nimport type { Document } from '@/types'\n\nexport const dynamic = 'force-dynamic'\n\nexport default function Documents() {\n  const [documents, setDocuments] = useState<Document[]>([])\n  const [familyId, setFamilyId] = useState<string | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [editingDocument, setEditingDocument] = useState<Document | null>(null)\n  const [downloadingId, setDownloadingId] = useState<string | null>(null)\n  const supabase = createClient()\n\n  useEffect(() => {\n    loadData()\n  }, [])\n\n  const loadData = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser()\n      \n      if (user) {\n        // Get family ID\n        const { data: family } = await supabase\n          .from('families')\n          .select('id')\n          .eq('user_id', user.id)\n          .single()\n\n        if (family) {\n          setFamilyId(family.id)\n          await loadDocuments(family.id)\n        }\n      }\n    } catch (error) {\n      console.error('Error loading data:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const loadDocuments = async (familyId: string) => {\n    const { data, error } = await supabase\n      .from('documents')\n      .select('*')\n      .eq('family_id', familyId)\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      console.error('Error loading documents:', error)\n    } else {\n      setDocuments(data || [])\n    }\n  }\n\n  const handleDownload = async (doc: Document) => {\n    setDownloadingId(doc.id)\n    \n    try {\n      const { data, error } = await supabase.storage\n        .from('family-documents')\n        .download(doc.file_path)\n\n      if (error) throw error\n\n      // Create a download link\n      const url = window.URL.createObjectURL(data)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = doc.file_name\n      document.body.appendChild(a)\n      a.click()\n      window.URL.revokeObjectURL(url)\n      document.body.removeChild(a)\n    } catch (error) {\n      console.error('Error downloading document:', error)\n      alert('Failed to download document. Please try again.')\n    } finally {\n      setDownloadingId(null)\n    }\n  }\n\n  const handleDelete = async (doc: Document) => {\n    if (!confirm(`Are you sure you want to delete \"${doc.title}\"?`)) return\n\n    try {\n      // Delete from storage\n      const { error: storageError } = await supabase.storage\n        .from('family-documents')\n        .remove([doc.file_path])\n\n      if (storageError) throw storageError\n\n      // Delete from database\n      const { error: dbError } = await supabase\n        .from('documents')\n        .delete()\n        .eq('id', doc.id)\n\n      if (dbError) throw dbError\n\n      if (familyId) await loadDocuments(familyId)\n    } catch (error) {\n      console.error('Error deleting document:', error)\n      alert('Failed to delete document. Please try again.')\n    }\n  }\n\n  const handleEdit = (doc: Document) => {\n    setEditingDocument(doc)\n    setIsModalOpen(true)\n  }\n\n  const handleAddNew = () => {\n    setEditingDocument(null)\n    setIsModalOpen(true)\n  }\n\n  const handleModalClose = () => {\n    setIsModalOpen(false)\n    setEditingDocument(null)\n  }\n\n  const handleUploadSuccess = () => {\n    if (familyId) {\n      loadDocuments(familyId)\n    }\n    handleModalClose()\n  }\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes'\n    const k = 1024\n    const sizes = ['Bytes', 'KB', 'MB', 'GB']\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i]\n  }\n\n  const getFileIcon = (fileType: string): string => {\n    if (fileType.startsWith('image/')) return 'üñºÔ∏è'\n    if (fileType.startsWith('video/')) return 'üé•'\n    if (fileType.startsWith('audio/')) return 'üéµ'\n    if (fileType.includes('pdf')) return 'üìÑ'\n    if (fileType.includes('word') || fileType.includes('document')) return 'üìù'\n    if (fileType.includes('excel') || fileType.includes('spreadsheet')) return 'üìä'\n    if (fileType.includes('powerpoint') || fileType.includes('presentation')) return 'üìΩÔ∏è'\n    if (fileType.includes('zip') || fileType.includes('rar') || fileType.includes('compressed')) return 'üì¶'\n    return 'üìÑ'\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-8\">\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center\">\n            <FontAwesomeIcon icon={faFileAlt} className=\"text-white text-xl\" />\n          </div>\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Documents</h1>\n            <p className=\"text-gray-600\">Upload and manage your important documents</p>\n          </div>\n        </div>\n\n        <button\n          onClick={handleAddNew}\n          className=\"btn-primary\"\n        >\n          <FontAwesomeIcon icon={faPlus} className=\"mr-2\" />\n          Upload Document\n        </button>\n      </div>\n\n      {/* Documents Grid */}\n      {documents.length === 0 ? (\n        <div className=\"text-center py-12 card\">\n          <FontAwesomeIcon icon={faFileAlt} className=\"text-6xl text-gray-300 mb-4\" />\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Documents Yet</h3>\n          <p className=\"text-gray-600 mb-6\">Start by uploading your first document</p>\n          <button\n            onClick={handleAddNew}\n            className=\"btn-primary\"\n          >\n            <FontAwesomeIcon icon={faPlus} className=\"mr-2\" />\n            Upload Your First Document\n          </button>\n        </div>\n      ) : (\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {documents.map((doc) => (\n            <div key={doc.id} className=\"card\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"text-3xl\">{getFileIcon(doc.file_type)}</span>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"font-semibold text-gray-900 truncate\">{doc.title}</h3>\n                    <p className=\"text-xs text-gray-500\">{formatFileSize(doc.file_size)}</p>\n                  </div>\n                </div>\n              </div>\n\n              {doc.description && (\n                <p className=\"text-sm text-gray-600 mb-4 line-clamp-2\">{doc.description}</p>\n              )}\n\n              <div className=\"mb-4\">\n                <p className=\"text-xs text-gray-500 truncate\" title={doc.file_name}>\n                  {doc.file_name}\n                </p>\n                <p className=\"text-xs text-gray-400 mt-1\">\n                  {new Date(doc.created_at).toLocaleDateString()}\n                </p>\n              </div>\n\n              <div className=\"flex gap-2 pt-4 border-t border-gray-100\">\n                <button\n                  onClick={() => handleDownload(doc)}\n                  disabled={downloadingId === doc.id}\n                  className=\"flex-1 text-sm px-3 py-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 transition-colors disabled:opacity-50 flex items-center justify-center gap-2\"\n                >\n                  {downloadingId === doc.id ? (\n                    <>\n                      <FontAwesomeIcon icon={faSpinner} className=\"animate-spin\" />\n                      <span>Downloading...</span>\n                    </>\n                  ) : (\n                    <>\n                      <FontAwesomeIcon icon={faDownload} />\n                      <span>Download</span>\n                    </>\n                  )}\n                </button>\n                <button\n                  onClick={() => handleEdit(doc)}\n                  className=\"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors\"\n                  title=\"Edit details\"\n                >\n                  <FontAwesomeIcon icon={faEdit} />\n                </button>\n                <button\n                  onClick={() => handleDelete(doc)}\n                  className=\"px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors\"\n                  title=\"Delete\"\n                >\n                  <FontAwesomeIcon icon={faTrash} />\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      <UploadDocumentModal\n        isOpen={isModalOpen}\n        onClose={handleModalClose}\n        onSuccess={handleUploadSuccess}\n        familyId={familyId}\n        document={editingDocument}\n      />\n    </div>\n  )\n}\n\n","'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { createClient } from '@/lib/supabase/client'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes, faUpload, faSpinner, faFile } from '@fortawesome/free-solid-svg-icons'\nimport type { Document } from '@/types'\n\ninterface UploadDocumentModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onSuccess: () => void\n  familyId: string | null\n  document?: Document | null\n}\n\nexport default function UploadDocumentModal({\n  isOpen,\n  onClose,\n  onSuccess,\n  familyId,\n  document\n}: UploadDocumentModalProps) {\n  const [title, setTitle] = useState('')\n  const [description, setDescription] = useState('')\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\n  const [uploading, setUploading] = useState(false)\n  const [uploadProgress, setUploadProgress] = useState(0)\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const supabase = createClient()\n\n  useEffect(() => {\n    if (document) {\n      setTitle(document.title)\n      setDescription(document.description || '')\n      setSelectedFile(null)\n    } else {\n      resetForm()\n    }\n  }, [document, isOpen])\n\n  const resetForm = () => {\n    setTitle('')\n    setDescription('')\n    setSelectedFile(null)\n    setUploadProgress(0)\n    if (fileInputRef.current) {\n      fileInputRef.current.value = ''\n    }\n  }\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      // Check file size (max 50MB)\n      if (file.size > 50 * 1024 * 1024) {\n        alert('File size must be less than 50MB')\n        return\n      }\n      setSelectedFile(file)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!familyId) {\n      alert('Family ID not found')\n      return\n    }\n\n    if (!title.trim()) {\n      alert('Please enter a title')\n      return\n    }\n\n    // If editing, only title and description can be updated\n    if (document) {\n      await handleUpdate()\n      return\n    }\n\n    // For new uploads, file is required\n    if (!selectedFile) {\n      alert('Please select a file to upload')\n      return\n    }\n\n    setUploading(true)\n    setUploadProgress(0)\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser()\n      if (!user) throw new Error('User not found')\n\n      // Create unique file path\n      const fileExt = selectedFile.name.split('.').pop()\n      const fileName = `${Date.now()}-${Math.random().toString(36).substring(2)}.${fileExt}`\n      const filePath = `${user.id}/${fileName}`\n\n      // Upload file to storage\n      const { error: uploadError } = await supabase.storage\n        .from('family-documents')\n        .upload(filePath, selectedFile, {\n          cacheControl: '3600',\n          upsert: false,\n        })\n\n      if (uploadError) throw uploadError\n\n      setUploadProgress(50)\n\n      // Save document metadata to database\n      const { error: dbError } = await supabase\n        .from('documents')\n        .insert({\n          family_id: familyId,\n          title: title.trim(),\n          description: description.trim() || null,\n          file_name: selectedFile.name,\n          file_path: filePath,\n          file_size: selectedFile.size,\n          file_type: selectedFile.type || 'application/octet-stream',\n        })\n\n      if (dbError) {\n        // If database insert fails, delete the uploaded file\n        await supabase.storage\n          .from('family-documents')\n          .remove([filePath])\n        throw dbError\n      }\n\n      setUploadProgress(100)\n      onSuccess()\n      resetForm()\n    } catch (error: any) {\n      console.error('Error uploading document:', error)\n      alert(`Failed to upload document: ${error.message}`)\n    } finally {\n      setUploading(false)\n      setUploadProgress(0)\n    }\n  }\n\n  const handleUpdate = async () => {\n    if (!document) return\n\n    setUploading(true)\n\n    try {\n      const { error } = await supabase\n        .from('documents')\n        .update({\n          title: title.trim(),\n          description: description.trim() || null,\n          updated_at: new Date().toISOString(),\n        })\n        .eq('id', document.id)\n\n      if (error) throw error\n\n      onSuccess()\n      resetForm()\n    } catch (error: any) {\n      console.error('Error updating document:', error)\n      alert(`Failed to update document: ${error.message}`)\n    } finally {\n      setUploading(false)\n    }\n  }\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes'\n    const k = 1024\n    const sizes = ['Bytes', 'KB', 'MB', 'GB']\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i]\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-white/75 z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl\">\n        <div className=\"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between\">\n          <h2 className=\"text-2xl font-bold text-gray-900\">\n            {document ? 'Edit Document Details' : 'Upload Document'}\n          </h2>\n          <button\n            onClick={onClose}\n            disabled={uploading}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50\"\n          >\n            <FontAwesomeIcon icon={faTimes} className=\"text-xl\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {/* File Upload - Only show for new uploads */}\n          {!document && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                File *\n              </label>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                disabled={uploading}\n              />\n              \n              {selectedFile ? (\n                <div className=\"border-2 border-indigo-200 bg-indigo-50 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <FontAwesomeIcon icon={faFile} className=\"text-indigo-600 text-2xl\" />\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{selectedFile.name}</p>\n                        <p className=\"text-sm text-gray-600\">{formatFileSize(selectedFile.size)}</p>\n                      </div>\n                    </div>\n                    {!uploading && (\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setSelectedFile(null)\n                          if (fileInputRef.current) {\n                            fileInputRef.current.value = ''\n                          }\n                        }}\n                        className=\"text-red-600 hover:text-red-700\"\n                      >\n                        <FontAwesomeIcon icon={faTimes} />\n                      </button>\n                    )}\n                  </div>\n                </div>\n              ) : (\n                <button\n                  type=\"button\"\n                  onClick={() => fileInputRef.current?.click()}\n                  disabled={uploading}\n                  className=\"w-full border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-indigo-400 hover:bg-indigo-50 transition-colors disabled:opacity-50\"\n                >\n                  <FontAwesomeIcon icon={faUpload} className=\"text-4xl text-gray-400 mb-3\" />\n                  <p className=\"text-gray-700 font-medium\">Click to select a file</p>\n                  <p className=\"text-sm text-gray-500 mt-1\">Max file size: 50MB</p>\n                </button>\n              )}\n            </div>\n          )}\n\n          {/* Title Field */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Title *\n            </label>\n            <input\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              className=\"input-field\"\n              placeholder=\"e.g., Passport Copy, House Insurance Policy\"\n              required\n              disabled={uploading}\n              maxLength={200}\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              {title.length}/200 characters\n            </p>\n          </div>\n\n          {/* Description Field */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Description (Optional)\n            </label>\n            <textarea\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              className=\"input-field min-h-[100px]\"\n              placeholder=\"Add any additional details or notes about this document...\"\n              disabled={uploading}\n              maxLength={1000}\n              rows={4}\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              {description.length}/1000 characters\n            </p>\n          </div>\n\n          {/* Upload Progress */}\n          {uploading && (\n            <div className=\"bg-indigo-50 rounded-lg p-4\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"text-sm font-medium text-indigo-900\">\n                  {document ? 'Updating...' : 'Uploading...'}\n                </span>\n                <span className=\"text-sm text-indigo-700\">{uploadProgress}%</span>\n              </div>\n              <div className=\"w-full bg-indigo-200 rounded-full h-2\">\n                <div\n                  className=\"bg-indigo-600 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                />\n              </div>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-3 pt-4 border-t border-gray-200\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={uploading}\n              className=\"flex-1 btn-secondary disabled:opacity-50\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={uploading || !title.trim() || (!document && !selectedFile)}\n              className=\"flex-1 btn-primary disabled:opacity-50\"\n            >\n              {uploading ? (\n                <>\n                  <FontAwesomeIcon icon={faSpinner} className=\"mr-2 animate-spin\" />\n                  {document ? 'Updating...' : 'Uploading...'}\n                </>\n              ) : (\n                <>\n                  <FontAwesomeIcon icon={document ? faTimes : faUpload} className=\"mr-2\" />\n                  {document ? 'Update Details' : 'Upload Document'}\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}