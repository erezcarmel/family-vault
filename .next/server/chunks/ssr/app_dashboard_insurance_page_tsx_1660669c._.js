module.exports=[62255,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(69240),e=a.i(3650),f=a.i(21929),g=a.i(40986),h=a.i(38789);let i=[{id:"life_insurance",title:"Life Insurance"},{id:"home_insurance",title:"Home Insurance"},{id:"health_insurance",title:"Health Insurance"}];function j(){let a,[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)("all"),v=(0,d.createClient)();(0,c.useEffect)(()=>{w()},[]);let w=async()=>{try{let{data:{user:a}}=await v.auth.getUser();if(a){let{data:b}=await v.from("families").select("id").eq("user_id",a.id).single();b&&(m(b.id),await x(b.id))}}catch(a){console.error("Error loading data:",a)}finally{o(!1)}},x=async a=>{let{data:b,error:c}=await v.from("assets").select("*").eq("family_id",a).eq("category","insurance").order("created_at",{ascending:!1});c?console.error("Error loading assets:",c):k(b||[])},y=async(a,b)=>{if(l)try{if(r){let{error:c}=await v.from("assets").update({type:a,data:b,updated_at:new Date().toISOString()}).eq("id",r.id);if(c)throw c}else{let{error:c}=await v.from("assets").insert({family_id:l,category:"insurance",type:a,data:b});if(c)throw c}await x(l),q(!1),s(null)}catch(a){console.error("Error saving asset:",a),alert("Failed to save insurance policy. Please try again.")}},z=async a=>{if(confirm("Are you sure you want to delete this insurance policy?"))try{let{error:b}=await v.from("assets").delete().eq("id",a);if(b)throw b;l&&await x(l)}catch(a){console.error("Error deleting asset:",a)}},A=a=>{s(a),q(!0)},B=()=>{s(null),q(!0)};return n?(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faShieldAlt,className:"text-white text-xl"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Insurance"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage your insurance policies"})]})]}),(0,b.jsxs)("button",{onClick:B,className:"btn-primary",children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faPlus,className:"mr-2"}),"Add Policy"]})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg border transition-all ${"all"===t?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-gray-900 border-gray-200 hover:border-indigo-400 hover:bg-indigo-50"}`,children:[(0,b.jsx)("span",{className:"font-medium",children:"All"}),(0,b.jsxs)("span",{className:"ml-2 text-sm opacity-75",children:["(",j.length,")"]})]}),i.map(a=>{let c=j.filter(b=>b.type===a.id).length;return(0,b.jsxs)("button",{onClick:()=>u(a.id),className:`px-4 py-2 rounded-lg border transition-all ${t===a.id?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-gray-900 border-gray-200 hover:border-indigo-400 hover:bg-indigo-50"}`,children:[(0,b.jsx)("span",{className:"font-medium",children:a.title}),(0,b.jsxs)("span",{className:"ml-2 text-sm opacity-75",children:["(",c,")"]})]},a.id)})]})}),0===(a="all"===t?j:j.filter(a=>a.type===t)).length?(0,b.jsxs)("div",{className:"text-center py-12 card",children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faShieldAlt,className:"text-6xl text-gray-300 mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:0===j.length?"No Insurance Policies Yet":"No Policies in This Category"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:0===j.length?"Start by adding your first insurance policy":"Try selecting a different category or add a new policy"}),(0,b.jsxs)("button",{onClick:B,className:"btn-primary",children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faPlus,className:"mr-2"}),0===j.length?"Add Your First Policy":"Add Policy"]})]}):(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(a=>(0,b.jsx)(g.default,{asset:a,onEdit:A,onDelete:z},a.id))}),(0,b.jsx)(h.default,{isOpen:p,onClose:()=>{q(!1),s(null)},onSave:y,asset:r,subCategories:i,category:"insurance"})]})}a.s(["default",()=>j,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=app_dashboard_insurance_page_tsx_1660669c._.js.map