{"version":3,"sources":["../../../../app/dashboard/profile/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { createClient } from '@/lib/supabase/client'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUser, faEnvelope, faShieldAlt, faUsers, faCalendar } from '@fortawesome/free-solid-svg-icons'\nimport { getFamilyId, getUserRole } from '@/lib/db-helpers-client'\nimport type { UserRole } from '@/types'\n\nexport default function Profile() {\n  const [userEmail, setUserEmail] = useState<string>('')\n  const [userRole, setUserRole] = useState<UserRole | null>(null)\n  const [familyName, setFamilyName] = useState<string>('')\n  const [createdAt, setCreatedAt] = useState<string>('')\n  const [loading, setLoading] = useState(true)\n  const supabase = createClient()\n\n  useEffect(() => {\n    loadProfile()\n  }, [])\n\n  const loadProfile = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser()\n      \n      if (user) {\n        setUserEmail(user.email || '')\n        setCreatedAt(user.created_at || '')\n\n        const familyId = await getFamilyId(supabase)\n        if (familyId) {\n          const role = await getUserRole(supabase, familyId)\n          setUserRole(role)\n\n          const { data: family } = await supabase\n            .from('families')\n            .select('family_name')\n            .eq('id', familyId)\n            .single()\n\n          if (family) {\n            setFamilyName(family.family_name || '')\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error loading profile:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const formatDate = (dateString: string) => {\n    if (!dateString) return 'N/A'\n    const date = new Date(dateString)\n    return date.toLocaleDateString('en-US', { \n      year: 'numeric', \n      month: 'long', \n      day: 'numeric' \n    })\n  }\n\n  const getRoleLabel = (role: UserRole | null) => {\n    switch (role) {\n      case 'admin':\n        return 'Admin'\n      case 'editor':\n        return 'Editor'\n      case 'member':\n        return 'Member'\n      default:\n        return 'Unknown'\n    }\n  }\n\n  const getRoleColor = (role: UserRole | null) => {\n    switch (role) {\n      case 'admin':\n        return 'bg-red-100 text-red-800'\n      case 'editor':\n        return 'bg-blue-100 text-blue-800'\n      case 'member':\n        return 'bg-gray-100 text-gray-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"card\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-4\"></div>\n            <div className=\"space-y-4\">\n              <div className=\"h-4 bg-gray-200 rounded\"></div>\n              <div className=\"h-4 bg-gray-200 rounded w-5/6\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"flex items-center space-x-4 mb-8\">\n        <div className=\"w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center\">\n          <FontAwesomeIcon icon={faUser} className=\"text-white text-xl\" />\n        </div>\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">My Profile</h1>\n          <p className=\"text-gray-600\">View your account information</p>\n        </div>\n      </div>\n\n      <div className=\"card\">\n        <div className=\"space-y-6\">\n          <div className=\"flex items-center space-x-4 pb-6 border-b border-gray-200\">\n            <div className=\"w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center\">\n              <FontAwesomeIcon icon={faUser} className=\"text-indigo-600 text-3xl\" />\n            </div>\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">{userEmail}</h2>\n              <span className={`inline-block mt-2 px-3 py-1 rounded-full text-sm font-semibold ${getRoleColor(userRole)}`}>\n                {getRoleLabel(userRole)}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <FontAwesomeIcon icon={faEnvelope} className=\"text-gray-600\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500 mb-1\">Email Address</p>\n                <p className=\"text-gray-900 font-medium\">{userEmail || 'N/A'}</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <FontAwesomeIcon icon={faShieldAlt} className=\"text-gray-600\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500 mb-1\">Role</p>\n                <p className=\"text-gray-900 font-medium\">{getRoleLabel(userRole)}</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <FontAwesomeIcon icon={faUsers} className=\"text-gray-600\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500 mb-1\">Family Name</p>\n                <p className=\"text-gray-900 font-medium\">{familyName || 'N/A'}</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <FontAwesomeIcon icon={faCalendar} className=\"text-gray-600\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500 mb-1\">Account Created</p>\n                <p className=\"text-gray-900 font-medium\">{formatDate(createdAt)}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}